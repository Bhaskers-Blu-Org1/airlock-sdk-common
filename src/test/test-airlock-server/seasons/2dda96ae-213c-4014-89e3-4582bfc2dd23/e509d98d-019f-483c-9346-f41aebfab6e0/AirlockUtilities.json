{
	"seasonId": "e509d98d-019f-483c-9346-f41aebfab6e0",
	"utilities": [
		{
			"lastModified": 1484467884616,
			"seasonId": "e509d98d-019f-483c-9346-f41aebfab6e0",
			"stage": "PRODUCTION",
			"uniqueId": "6ef8dd0a-eb29-4bcc-82bd-133c03e6831e",
			"utility": "function deepFreeze(obj)\n{\n\tObject.freeze(obj);\n\tObject.getOwnPropertyNames(obj).forEach(function (prop)\t{\n\t\tif (obj.hasOwnProperty(prop) && obj[prop] !== null\n\t\t&& (typeof obj[prop] === \"object\" || typeof obj[prop] === \"function\")\n\t\t&& !Object.isFrozen(obj[prop])) {\n\t\t\tdeepFreeze(obj[prop]);\n\t\t}\n\t});\n\treturn obj;\n};\n\n\nfunction toDate(dateString)\n{\n\treturn new Date(dateString);\n};\n"
		},
		{
			"lastModified": 1491387417214,
			"seasonId": "e509d98d-019f-483c-9346-f41aebfab6e0",
			"stage": "PRODUCTION",
			"uniqueId": "89f4c95a-2238-4453-a154-b7c0c4538f2d",
			"utility": " \nfunction deepFreeze(obj)\n{\n\tObject.freeze(obj);\n\tObject.getOwnPropertyNames(obj).forEach(function (prop)\t{\n\t\tif (obj.hasOwnProperty(prop) && obj[prop] !== null\n\t\t&& (typeof obj[prop] === \"object\" || typeof obj[prop] === \"function\")\n\t\t&& !Object.isFrozen(obj[prop])) {\n\t\t\tdeepFreeze(obj[prop]);\n\t\t}\n\t});\n\treturn obj;\n};\n\n\/\/----------------------------------------------------------------------------------\n\/\/ this function replaces deepFreeze(), to provide alerts when changes are attempted\nfunction create_frozen_object(name, content)\n{\n\tObject.defineProperty(this, name, {\n\t\tvalue: content,\n\t\tenumerable: true,\n\t\tconfigurable: true\n\t});\n\n\t\/\/ activate alerts in validation mode\n\tif (typeof(_validation_mode_) !== \"undefined\")\n\t{\n\t\tmake_proxy(this, name);\n\t}\n}\n\nfunction make_proxy(obj, propName)\n{\n\tvar attr = Object.getOwnPropertyDescriptor(obj, propName);\n\tif (!attr.configurable)\n\t\treturn;\n\n\tvar prop = obj[propName];\n\tobj[\"__proxy__\" + propName] = prop;\n\t\n\tif (typeof prop === \"object\" && prop !== null)\n\t{\n\t\tvar child_names = Object.getOwnPropertyNames(prop);\n\t\tfor (var i = 0; i < child_names.length; ++i)\n\t\t{\n\t\t\tmake_proxy(prop, child_names[i]);\n\t\t}\n\t}\n\tredefine_property(obj, propName);\n}\n\nfunction redefine_property(obj, nam)\n{\n\tObject.defineProperty(obj, nam, {\n\t\tset: function(val) {  throw \"error: trying to modify frozen context with \" + val;  },\n\t\tget: function ()    { return obj[\"__proxy__\" + nam]; }\n\t});\n}\n\/\/---------------------------------------------------------------------------------\n\nfunction isImperial() {\n\treturn context.userPreferences.unitsOfMeasure == \"imperial\";\n};\nfunction isMetric() {\n\treturn context.userPreferences.unitsOfMeasure == \"metric\";\n};\nfunction isHybrid() {\n\treturn context.userPreferences.unitsOfMeasure == \"hybrid\";\n};\nfunction isCelsius() {\n\treturn (isMetric() || isHybrid());\n};\nfunction isKMH() {\n\treturn isMetric();\n};\n\nfunction calcDistance(coords1, coords2) {\n\tfunction toRad(x) { return x * Math.PI \/ 180; };\n\n\tvar lon1 = coords1[0]; var lat1 = coords1[1];\n\tvar lon2 = coords2[0]; var lat2 = coords2[1];\n\tvar x1 = lat2 - lat1; var dLat = toRad(x1);\n\tvar x2 = lon2 - lon1; var dLon = toRad(x2);\n\tvar a = Math.sin(dLat \/ 2) * Math.sin(dLat \/ 2) + Math.cos(toRad(lat1)) * Math.cos(toRad(lat2)) * Math.sin(dLon \/ 2) * Math.sin(dLon \/ 2);\n\tvar c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n\tvar d = 6371 * c; \/\/ earth radius in km\n\n\treturn isMetric() ? d : (d \/ 1.60934);\n};\n\nfunction getLengthUnit(){ \/\/ hybrid is cm\n\tvar id = isImperial() ? \"Units.Inches\" : \"Units.CM\";\n\treturn translate(id);\n}\n\nfunction getVelocityUnit(){ \/\/ hybrid is miles\n    var id = isMetric() ? \"Units.KMH\" : \"Units.MPH\" ;\n\treturn translate(id);\n}\n\nfunction getTemperatureUnit(){ \/\/ hybrid is C\n    return isImperial() ? \"F\" : \"C\";\n}\n\nfunction getPressureUnit(){ \/\/ hybrid is MB\n    var id = isImperial() ? \"Units.InchMercury\" : \"Units.MiliBars\" ;\n\treturn translate(id);\n}\n\nfunction getDistanceShortUnit(){ \/\/ hybrid is meters\n    var id = isImperial() ? \"Units.Feet\" : \"Units.Meter\";\n\treturn translate(id);\n}\n\nfunction getDistanceUnit(){ \/\/ hybrid is miles\n    var id = isMetric() ? \"Units.KM\"  : \"Units.Miles\" ;\n\treturn translate(id);\n}\n\nfunction inMiles(distance)\n{\n\treturn (isMetric() ? distance * 1.60934 : distance);\n};\n\nfunction inFahrenheit(degrees)\n{\n\treturn (isCelsius() ? (degrees - 32) \/ 1.8 : degrees);\n};\n\nfunction inMPH(speed)\n{\n\treturn (isKMH() ? speed * 1.60934 : speed);\n};\n\nfunction inInches(span) \/\/ hybrid is cm\n{\n\treturn isImperial() ? span : span * 2.54;\n};\n\nfunction translate(stringId)\n{\n\tvar stringValue = translations[stringId];\n\tif (stringValue === undefined) {\n\t\tthrow \"missing translation id: \" + stringId;\n\t}\n\n\tif (typeof(_validation_mode_) !== \"undefined\")\n\t{\n\t\tvar regex = \/\\[\\[\\[(\\d+)\\]\\]\\]\/g;\n\t\tvar placeholders = [];\n\t\tvar match;\n\t\twhile (match = regex.exec(stringValue)) {\n\t\t\tplaceholders.push(match[1]);\n\t\t}\n\n\t\tfor (var n = 0; n < placeholders.length; ++n) {\n\t\t\tif (placeholders[n] < 1 || placeholders[n] >= arguments.length) {\n\t\t\t\tthrow \"translation id: \" + stringId + \" has unmatched placeholder \" + placeholders[n];\n\t\t\t}\n\t\t}\n\t}\n\n\tfor (var i = 1; i < arguments.length; ++i) {\n\t\tstringValue = stringValue.replace( \"[[[\" + i + \"]]]\", arguments[i]);\n\t}\n\treturn stringValue;\n};\n\n\nfunction toDate(dateString) {\n\treturn new Date(dateString);\n};\n\nfunction getHours(date){\n\treturn parseInt(date.substring(11,13),10);\n}\n\nfunction getMinutes(date){\n\treturn parseInt(date.substring(14,16),10);\n}\n\nfunction getTimeStr(date){\n\treturn date.substring(11,16);\n}\n\nfunction formatAMPM(d) {\n\t\n\tif (context.userPreferences.is24HourFormat){\n\t\treturn getTimeStr(d);\n\t}\n\tvar hours = getHours(d); \n\tvar minutes = getMinutes(d); \n\tvar ampm = hours >= 12 ? translate(\"Units.PM\") : translate(\"Units.AM\");\n\n\thours = hours % 12; hours = hours ? hours : 12; \/\/ the hour '0' should be '12' \n\tminutes = minutes < 10 ? '0'+minutes : minutes;\n\n    var strTime = formatDigits(hours + ':' + minutes, context.userPreferences.isEasternArabicNumerals);\n    if (context.device.localeLanguage == \"ja\" || context.device.localeLanguage.startsWith(\"zh\")){\n        strTime = ampm + strTime;\n    } else if (context.device.localeLanguage == \"ko\"){\n        strTime = ampm + ' ' + strTime;\n    } else {\n        strTime = strTime + ' ' + ampm;\n    }\n\treturn strTime; \n};\n\nfunction formatDigits(str, isEasternArabicNumerals){\n\n    if (!isEasternArabicNumerals) { return str; }\n\n    var retVal;\n    if (typeof str !== 'string') { \n        retVal = str.toString();\n    } else {\n        retVal = str;\n    }\n    var id = [\"\\u06F0\",\"\\u06F1\",\"\\u06F2\",\"\\u06F3\",\"\\u06F4\",\"\\u06F5\",\"\\u06F6\",\"\\u06F7\",\"\\u06F8\",\"\\u06F9\"];\n    return retVal.replace(\/[0-9]\/g, function(w){\n        return id[+w];\n    });\n};\n\nfunction compareTime (d, str) {\n  var hours = getHours(d);\n  var minutes = getMinutes(d);\n  var target = str.split(\":\");\n\n  var diff = hours - target[0];\n  if (diff != 0)\n\treturn (diff < 0) ? -1 : 1;\n\n  diff = minutes - target[1];\n  return (diff == 0) ? 0 : (diff < 0 ? -1 : 1);\n};\n\n\/\/ a more extensible implementation of InMiles(), InFahrenheit() etc.\n\/\/ supply size and type of the unit (todo: use an enum object for the unit type instead of a string)\nfunction Unit(amount, type)\n{\n\tswitch (type)\n\t{\n\tcase \"M\":\n\tcase \"miles\":\n\t\treturn (isMetric() || isHybrid()) ? amount * 1.60934 : amount;\n\n\tcase \"KM\":\n\tcase \"kilometers\":\n\t\treturn (isMetric() ? amount : amount \/ 1.60934);\n\n\tcase \"MPH\":\n\t\treturn (isKMH() ? amount * 1.60934 : amount);\n\n\tcase \"KMH\":\n\t\treturn (isKMH() ? amount : amount \/ 1.60934);\n\n\tcase \"I\":\n\tcase \"inches\":\n\t\treturn (isMetric() ? amount * 2.54 : amount);\n\n\tcase \"CM\":\n\tcase \"centimeters\":\n\t\treturn (isMetric() || isHybrid()) ? amount : amount \/ 2.54;\n\n\tcase \"F\":\n\tcase \"fahrenheit\":\n\t\treturn (isCelsius() ? (amount - 32) \/ 1.8 : amount);\n\n\tcase \"C\":\n\tcase \"celsius\":\n\t\treturn (isCelsius() ? amount : (amount * 1.8) + 32);\n\n\tdefault:\n\t\tthrow \"type \" + type + \" is not implemented\" ;\n\t}\n};\n\nfunction exists(varName)\n{\n\ttry {\n\t\treturn eval(varName) !== undefined;\n\t}\n\tcatch(err) {\n\t\treturn false;\n\t}\n};\n"
		},
		{
			"lastModified": 1492167925673,
			"seasonId": "e509d98d-019f-483c-9346-f41aebfab6e0",
			"stage": "PRODUCTION",
			"uniqueId": "2edbdc58-a755-4bdc-b14f-e40ab047f44c",
			"utility": "function daysFromToday(targetDate) {\n\n  var date1 = new Date(targetDate);\n\n  var date2 = new Date();\n\n  var timeDiff = Math.abs(date2.getTime() - date1.getTime());\n\n  var diffDays = Math.ceil(timeDiff \/ (1000 * 3600 * 24));\n\n  return diffDays;\n\n}"
		},
		{
			"lastModified": 1500368006585,
			"seasonId": "e509d98d-019f-483c-9346-f41aebfab6e0",
			"stage": "PRODUCTION",
			"uniqueId": "13751054-7e72-4678-886d-ded430941ddd",
			"utility": " function isPrecipIntensityInDailyForecast(range, rainPrecentCriteria, iconExtd, testing) {\n    if (testing) {\n        return 0;\n    }\n\n    if (context.weatherSummary.dailyForecasts === null) { return -1; }\n    if (Array.isArray(context.weatherSummary.dailyForecasts) === -1) { return -1; }\n    if (context.weatherSummary.dailyForecasts.length < range) { return -1; }\n\n    var passed = false;\n\n    for (i = 0; i < range; i+=1) {\n        \/\/ check day\n        passed = context.weatherSummary.dailyForecasts[i].day.precipPercentage >= rainPrecentCriteria &&\n        iconExtd.hasOwnProperty(context.weatherSummary.dailyForecasts[i].day.iconExtended);\n\n        if (passed) {\n            return i;\n        }\n\n        \/\/check night\n        passed = context.weatherSummary.dailyForecasts[i].night.precipPercentage >= rainPrecentCriteria &&\n        iconExtd.hasOwnProperty(context.weatherSummary.dailyForecasts[i].night.iconExtended);\n        \n        if (passed) {\n            return i;\n        }\n    }\n    \n    return -1;\n}\n\nfunction getPrecipDescriptionForModerateRain () {\n\n\tvar range = 5;\n\tvar rainPrecentCriteria = 80;\n\n\tvar moderateIconExtd = {}; \/\/ simple hash table\n\tmoderateIconExtd[1000] = true;\n\tmoderateIconExtd[1002] = true;\n\tmoderateIconExtd[1010] = true;\n\tmoderateIconExtd[1012] = true;\n\n\tmoderateIconExtd[5100] = true;\n\tmoderateIconExtd[5110] = true;\n\tmoderateIconExtd[5300] = true;\n\tmoderateIconExtd[5302] = true;\n\tmoderateIconExtd[5310] = true;\n\tmoderateIconExtd[5312] = true;\n\n\tmoderateIconExtd[6500] = true;\n\tmoderateIconExtd[6503] = true;\n\tmoderateIconExtd[6510] = true;\n\tmoderateIconExtd[6510] = true;\n\tmoderateIconExtd[6513] = true;\n\n\tmoderateIconExtd[7500] = true;\n\tmoderateIconExtd[7503] = true;\n\tmoderateIconExtd[7510] = true;\n\tmoderateIconExtd[7513] = true;\n\n\tmoderateIconExtd[8100] = true;\n\tmoderateIconExtd[8110] = true;\n\tmoderateIconExtd[8500] = true;\n\tmoderateIconExtd[8510] = true;\n\n\tmoderateIconExtd[1200] = true;\n\tmoderateIconExtd[1210] = true;\n\tmoderateIconExtd[1240] = true;\n\tmoderateIconExtd[1270] = true;\n\n\tmoderateIconExtd[6300] = true;\n\tmoderateIconExtd[6303] = true;\n\tmoderateIconExtd[6310] = true;\n\tmoderateIconExtd[6313] = true;\n\n\tmoderateIconExtd[7300] = true;\n\tmoderateIconExtd[7303] = true;\n\tmoderateIconExtd[7310] = true;\n\tmoderateIconExtd[7313] = true;\n\n\tmoderateIconExtd[3700] = true;\n\tmoderateIconExtd[3710] = true;\n\tmoderateIconExtd[3800] = true;\n\tmoderateIconExtd[3810] = true;\n\n\tmoderateIconExtd[6203] = true;\n\tmoderateIconExtd[6213] = true;\n\n\tmoderateIconExtd[7203] = true;\n\tmoderateIconExtd[7213] = true;\n\n\tmoderateIconExtd[5500] = true;\n\tmoderateIconExtd[5509] = true;\n\n\tmoderateIconExtd[3709] = true;\n\tmoderateIconExtd[3719] = true;\n\tmoderateIconExtd[3809] = true;\n\tmoderateIconExtd[3819] = true;\n\n\tmoderateIconExtd[6200] = true;\n\tmoderateIconExtd[6210] = true;\n\n\tvar pos = isPrecipIntensityInDailyForecast(range, rainPrecentCriteria, moderateIconExtd, false);\n\n\tif (pos <0) return translate(\"HeadsUp.ModerateRainUpper\"); \/\/ should not reach this if Rule is correct; except for when testing\n\n\tvar forecastDate = new Date();\n\tforecastDate.setDate(forecastDate.getDate() + pos);\n\t  \n\t  switch (forecastDate.getDay()) {\n\t\t  case 0:\n\t\t\t  return translate(\"HeadsUp.ModerateRainSundayUpper\");\n\t\t\t  break;\n\t\t  case 1:\n\t\t\t  return translate(\"HeadsUp.ModerateRainMondayUpper\");\n\t\t\t  break;\n\t\t  case 2:\n\t\t\t  return translate(\"HeadsUp.ModerateRainTuesdayUpper\");\n\t\t\t  break;\n\t\t  case 3:\n\t\t\t  return translate(\"HeadsUp.ModerateRainWednesdayUpper\");\n\t\t\t  break;\n\t\t  case 4:\n\t\t\t  return translate(\"HeadsUp.ModerateRainThursdayUpper\");\n\t\t\t  break;\n\t\t  case 5:\n\t\t\t  return translate(\"HeadsUp.ModerateRainFridayUpper\");\n\t\t\t  break;\n\t\t  case 6:\n\t\t\t  return translate(\"HeadsUp.ModerateRainSaturdayUpper\");\n\t\t\t  break;\n\t\t  default:\n\t\t\t  return translate(\"HeadsUp.ModerateRainUpper\"); \/\/ again shouldn't happen; except for when testing\n\t\t  }\n}\n\nfunction getPrecipDescriptionForHeavyRain () {\n\n\tvar range = 5;\n\tvar rainPrecentCriteria = 80;\n\n\tvar heavyIconExtd = {}; \/\/ simple hash table\n\theavyIconExtd[300] = true;\n\theavyIconExtd[310] = true;\n\n\theavyIconExtd[400] = true;\n\theavyIconExtd[402] = true;\n\theavyIconExtd[410] = true;\n\theavyIconExtd[412] = true;\n\n\theavyIconExtd[7200] = true;\n\theavyIconExtd[7210] = true;\n\n\theavyIconExtd[5700] = true;\n\theavyIconExtd[5710] = true;\n\n\theavyIconExtd[4000] = true;\n\theavyIconExtd[4010] = true;\n\n\theavyIconExtd[5709] = true;\n\theavyIconExtd[5719] = true;\n\n\tvar pos = isPrecipIntensityInDailyForecast(range, rainPrecentCriteria, heavyIconExtd, false);\n\n\tif (pos <0) return translate(\"HeadsUp.HeavyRainUpper\"); \/\/ should not reach this if Rule is correct; except for when testing\n\n\tvar forecastDate = new Date();\n\tforecastDate.setDate(forecastDate.getDate() + pos);\n\t  \n\t  switch (forecastDate.getDay()) {\n\t\t  case 0:\n\t\t\t  return translate(\"HeadsUp.HeavyRainSundayUpper\");\n\t\t\t  break;\n\t\t  case 1:\n\t\t\t  return translate(\"HeadsUp.HeavyRainMondayUpper\");\n\t\t\t  break;\n\t\t  case 2:\n\t\t\t  return translate(\"HeadsUp.HeavyRainTuesdayUpper\");\n\t\t\t  break;\n\t\t  case 3:\n\t\t\t  return translate(\"HeadsUp.HeavyRainWednesdayUpper\");\n\t\t\t  break;\n\t\t  case 4:\n\t\t\t  return translate(\"HeadsUp.HeavyRainThursdayUpper\");\n\t\t\t  break;\n\t\t  case 5:\n\t\t\t  return translate(\"HeadsUp.HeavyRainFridayUpper\");\n\t\t\t  break;\n\t\t  case 6:\n\t\t\t  return translate(\"HeadsUp.HeavyRainSaturdayUpper\");\n\t\t\t  break;\n\t\t  default:\n\t\t\t  return translate(\"HeadsUp.HeavyRainUpper\"); \/\/ again shouldn't happen; except for when testing\n\t\t  }\n}\n      "
		},
		{
			"lastModified": 1503307680878,
			"seasonId": "e509d98d-019f-483c-9346-f41aebfab6e0",
			"stage": "PRODUCTION",
			"uniqueId": "28bcc659-59d5-4cb0-b255-c04b29021fff",
			"utility": "function daysFromToday(targetDate) {\n\n\n\n\n  var ms = 1000;\n\n  var minsInMs = 60000;\n\n  var hrsInMs = 3600000;\n\n  var daysInMs = 86400000;\n\n  \n\n  var date1 = new Date(targetDate);\n\n\n\n\n  var date2 = new Date();\n\n  \n\n   if (date1.getTime() <= date2.getTime()) {\n\n      return {\"days\":0, \"hours\":0, \"mins\": 0};\n\n  }\n\n\n\n\n  var timeDiff = date1.getTime() - date2.getTime();\n\n\n\n\n  var diffDays = Math.floor(timeDiff \/ daysInMs);\n\n\n\n\n  var diffHours = Math.floor ((timeDiff - diffDays*daysInMs) \/ hrsInMs);\n\n  \n\n  var diffMins = Math.floor ((timeDiff - diffDays*daysInMs - diffHours*hrsInMs) \/ minsInMs);\n\n  \n\n   return {\"days\":diffDays, \"hours\":diffHours, \"mins\": diffMins};\n\n  \n\n}"
		}
	]
}
